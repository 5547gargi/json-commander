{"version":3,"file":"content.js","sources":["webpack:///webpack/bootstrap b29675780f789a407d79?48b4","webpack:///extension/src/js/content.js","webpack:///?d41d","webpack:///extension/src/js/constants.js?227d","webpack:///extension/src/js/content/isJson.js","webpack:///extension/src/js/content/getJson.js","webpack:///extension/src/js/content/controls.js","webpack:///extension/src/js/content/expanderClick.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b29675780f789a407d79\n **/","import isJson from './content/isJson'\nimport getJson from './content/getJson'\nimport controls from './content/controls'\nimport {\n  MESSAGE,\n  SEND_JSON_STRING,\n  PORTNAME,\n  FORMATTED\n} from './constants'\nimport expanderClick from './content/expanderClick'\n\n// var css = require('../content')\nlet preTags = null\n\nconst main = (json) => {\n  const port = chrome.extension.connect({name: PORTNAME})\n  if (!port) return\n\n  // inject html for controls and return hooks\n  const controlsHooks = controls()\n\n  controlsHooks.form.addEventListener('submit', e => {\n    e.preventDefault()\n\n    port.postMessage({\n      type: SEND_JSON_STRING,\n      text: json,\n      length: json.length,\n      inputJsonPath: controlsHooks.input.value || '$'\n    })\n  })\n\n  port.onMessage.addListener(function(msg) {\n    console.log('msg from bg', msg);\n    if (msg.type === FORMATTED) {\n      controlsHooks.inside.innerHTML = msg.html\n      preTags = document.getElementsByTagName('pre')\n\n      preTags[0].hidden = true\n    }\n  })\n\n  controlsHooks.switcherRaw.addEventListener('change', (e) => {\n    controlsHooks.inside.hidden = true\n    document.querySelector('pre').hidden = false\n  })\n  controlsHooks.switcherFormatted.addEventListener('change', (e) => {\n    controlsHooks.inside.hidden = false\n    document.querySelector('pre').hidden = true\n  })\n  document.addEventListener(\n    'click',\n    expanderClick,\n    false // No need to propogate down\n  )\n\n  port.postMessage({\n    type: SEND_JSON_STRING,\n    text: json,\n    length: json.length,\n    inputJsonPath: controlsHooks.input.value || '$'\n  })\n}\n\nwindow.onload = () => {\n  const jsonString = getJson()\n\n  if (jsonString) {\n\n    main(jsonString)\n\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** extension/src/js/content.js\n **/","undefined\n\n\n/** WEBPACK FOOTER **\n ** \n **/","export const MESSAGE = 'MESSAGE'\nexport const SEND_JSON_STRING = 'SEND_JSON_STRING'\nexport const PORTNAME = 'PORTNAME'\nexport const FORMATTED = 'FORMATTED'\nexport const FORMATTING = 'FORMATTING'\n\nexport const NOT_JSON = 'NOT_JSON'\n\n\n\n/** WEBPACK FOOTER **\n ** extension/src/js/constants.js\n **/","const isJson = () => document.body.childNodes[0].tagName === 'PRE'\n\nexport default isJson\n\n\n\n/** WEBPACK FOOTER **\n ** extension/src/js/content/isJson.js\n **/","const getJson = () => {\n  var orig\n\n  if (document.body.childNodes[0].tagName === 'PRE') {\n    return document.body.childNodes[0].innerText\n  } else if (orig = document.getElementById('orig')) {\n    return orig.innerText\n  } else {\n    return false\n  }\n}\n\nexport default getJson\n\n\n\n/** WEBPACK FOOTER **\n ** extension/src/js/content/getJson.js\n **/","const template = `\n  <aside class=\"controls\">\n    <form id=\"controls__form\">\n      <input\n        id=\"controls__input\"\n        class=\"controls__input\"\n        name=\"jsonpath\"\n        value=\"\"\n        placeholder=\"jsonpath\"\n        autofocus\n      />\n      <button class=\"controls__submit\">submit</button>\n    </form>\n    <span>\n      <label><input type=\"radio\" name=\"switcher\" value=\"raw\" id=\"controls__raw\" />raw</label>\n      <label><input type=\"radio\" name=\"switcher\" value=\"formatted\" id=\"controls__formatted\" checked />formatted</label>\n    </span>\n  </aside>\n  <div id=\"orig\"></div>\n  <style>\n  body{-webkit-user-select:text;overflow-y:scroll !important;margin:0;position:relative}#optionBar{-webkit-user-select:none;display:block;position:absolute;top:9px;right:17px}#buttonFormatted,#buttonPlain{-webkit-border-radius:2px;-webkit-box-shadow:0px 1px 3px rgba(0,0,0,0.1);-webkit-user-select:none;background:-webkit-linear-gradient(#fafafa, #f4f4f4 40%, #e5e5e5);border:1px solid #aaa;color:#444;font-size:12px;margin-bottom:0px;min-width:4em;padding:3px 0;position:relative;z-index:10;display:inline-block;width:80px;text-shadow:1px 1px rgba(255,255,255,0.3)}#buttonFormatted{margin-left:0;border-top-left-radius:0;border-bottom-left-radius:0}#buttonPlain{margin-right:0;border-top-right-radius:0;border-bottom-right-radius:0;border-right:none}#buttonFormatted:hover,#buttonPlain:hover{-webkit-box-shadow:0px 1px 3px rgba(0,0,0,0.2);background:#ebebeb -webkit-linear-gradient(#fefefe, #f8f8f8 40%, #e9e9e9);border-color:#999;color:#222}#buttonFormatted:active,#buttonPlain:active{-webkit-box-shadow:inset 0px 1px 3px rgba(0,0,0,0.2);background:#ebebeb -webkit-linear-gradient(#f4f4f4, #efefef 40%, #dcdcdc);color:#333}#buttonFormatted.selected,#buttonPlain.selected{-webkit-box-shadow:inset 0px 1px 5px rgba(0,0,0,0.2);background:#ebebeb -webkit-linear-gradient(#e4e4e4, #dfdfdf 40%, #dcdcdc);color:#333}#buttonFormatted:focus,#buttonPlain:focus{outline:0}#jsonpOpener,#jsonpCloser{padding:4px 0 0 8px;color:#000;margin-bottom:-6px}#jsonpCloser{margin-top:0}#formattedJson{padding-left:28px;padding-top:6px}pre{padding:36px 5px 5px 5px}.kvov{display:block;padding-left:20px;margin-left:-20px;position:relative}.collapsed{white-space:nowrap}.collapsed>.blockInner{display:none}.collapsed>.ell:after{content:\"â€¦\";font-weight:bold}.collapsed>.ell{margin:0 4px;color:#888}.collapsed .kvov{display:inline}.e{width:20px;height:18px;display:block;position:absolute;left:-2px;top:1px;z-index:5;background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD1JREFUeNpiYGBgOADE%2F3Hgw0DM4IRHgSsDFOzFInmMAQnY49ONzZRjDFiADT7dMLALiE8y4AGW6LoBAgwAuIkf%2F%2FB7O9sAAAAASUVORK5CYII%3D\");background-repeat:no-repeat;background-position:center center;display:block;opacity:0.15}.collapsed>.e{-webkit-transform:rotate(-90deg);width:18px;height:20px;left:0px;top:0px}.e:hover{opacity:0.35}.e:active{opacity:0.5}.collapsed .kvov .e{display:none}.blockInner{display:block;padding-left:24px;border-left:1px dotted #bbb;margin-left:2px}#formattedJson,#jsonpOpener,#jsonpCloser{color:#333;font:13px/18px monospace}#formattedJson{color:#444}.b{font-weight:bold}.s{color:#0B7500;word-wrap:break-word}a:link,a:visited{text-decoration:none;color:inherit}a:hover,a:active{text-decoration:underline;color:#050}.bl,.nl,.n{font-weight:bold;color:#1A01CC}.k{color:#000}#formattingMsg{font:13px \"Lucida Grande\",\"Segoe UI\",\"Tahoma\";padding:10px 0 0 8px;margin:0;color:#333}#formattingMsg>svg{margin:0 7px;position:relative;top:1px}[hidden]{display:none !important}span{white-space:pre-wrap}@-webkit-keyframes spin{from{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}#spinner{-webkit-animation:spin 2s 0 infinite}*{-webkit-font-smoothing:antialiased}\n  </style>\n`\n\nconst controls = () => {\n  document.body.insertAdjacentHTML( 'afterbegin', template)\n\n\n  return {\n    form: document.getElementById('controls__form'),\n    input: document.getElementById('controls__input'),\n    inside: document.getElementById('orig'),\n    switcherRaw: document.getElementById('controls__raw'),\n    switcherFormatted: document.getElementById('controls__formatted')\n  }\n}\n\nexport default controls\n\n\n\n/** WEBPACK FOOTER **\n ** extension/src/js/content/controls.js\n **/","var lastKvovIdGiven = 0 ;\n\n\nfunction collapse(elements) {\n  // console.log('elements', elements) ;\n\n  var el, i, blockInner, count ;\n\n  for (i = elements.length - 1; i >= 0; i--) {\n    el = elements[i] ;\n    el.classList.add('collapsed') ;\n\n    // (CSS hides the contents and shows an ellipsis.)\n\n    // Add a count of the number of child properties/items (if not already done for this item)\n      if (!el.id) {\n        el.id = 'kvov' + (++lastKvovIdGiven) ;\n\n        // Find the blockInner\n          blockInner = el.firstElementChild ;\n          while ( blockInner && !blockInner.classList.contains('blockInner') ) {\n            blockInner = blockInner.nextElementSibling ;\n          }\n          if (!blockInner)\n            continue ;\n\n        // See how many children in the blockInner\n          count = blockInner.children.length ;\n\n        // Generate comment text eg \"4 items\"\n          var comment = count + (count===1 ? ' item' : ' items') ;\n        // Add CSS that targets it\n          // jfStyleEl.insertAdjacentHTML(\n          //   'beforeend',\n          //   '\\n#kvov'+lastKvovIdGiven+'.collapsed:after{color: #aaa; content:\" // '+comment+'\"}'\n          // ) ;\n      }\n  }\n}\nfunction expand(elements) {\n  for (var i = elements.length - 1; i >= 0; i--)\n    elements[i].classList.remove('collapsed') ;\n}\n\nfunction expanderClick(ev) {\n  // console.log('click', ev) ;\n\n  if (ev.which === 1) {\n    var elem = ev.target ;\n\n    if (elem.className === 'e') {\n      // It's a click on an expander.\n\n      ev.preventDefault() ;\n\n      var parent = elem.parentNode,\n          div = document.getElementById('orig'),\n          prevBodyHeight = document.body.offsetHeight,\n          scrollTop = document.body.scrollTop,\n          parentSiblings\n      ;\n\n      // Expand or collapse\n        if (parent.classList.contains('collapsed')) {\n          // EXPAND\n            // if (modKey(ev))\n            //   expand(parent.parentNode.children) ;\n            // else\n              expand([parent]) ;\n        }\n        else {\n          // COLLAPSE\n            // if (modKey(ev))\n            //   collapse(parent.parentNode.children) ;\n            // else\n              collapse([parent]) ;\n        }\n\n      // Restore scrollTop somehow\n        // Clear current extra margin, if any\n          div.style.marginBottom = 0 ;\n\n        // No need to worry if all content fits in viewport\n          if (document.body.offsetHeight < window.innerHeight) {\n            // console.log('document.body.offsetHeight < window.innerHeight; no need to adjust height') ;\n            return ;\n          }\n\n        // And no need to worry if scrollTop still the same\n          if (document.body.scrollTop === scrollTop) {\n            // console.log('document.body.scrollTop === scrollTop; no need to adjust height') ;\n            return ;\n          }\n\n        // console.log('Scrolltop HAS changed. document.body.scrollTop is now '+document.body.scrollTop+'; was '+scrollTop) ;\n\n        // The body has got a bit shorter.\n        // We need to increase the body height by a bit (by increasing the bottom margin on the jfContent div). The amount to increase it is whatever is the difference between our previous scrollTop and our new one.\n\n        // Work out how much more our target scrollTop is than this.\n          var difference = scrollTop - document.body.scrollTop  + 8 ; // it always loses 8px; don't know why\n\n        // Add this difference to the bottom margin\n          //var currentMarginBottom = parseInt(div.style.marginBottom) || 0 ;\n          div.style.marginBottom = difference + 'px' ;\n\n        // Now change the scrollTop back to what it was\n          document.body.scrollTop = scrollTop ;\n\n      return ;\n    }\n  }\n}\n\nexport default expanderClick\n\n\n\n/** WEBPACK FOOTER **\n ** extension/src/js/content/expanderClick.js\n **/"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACtCA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;AAKA;AACA;;;;;AACA;AACA;AACA;AACA;ACCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;ACvEA;AACA;ADCA;AACA;AACA;AACA;;;;;;;;;;;;;AELA;AAAA;AFAA;AACA;;;;;;;;;;;;;AGDA;AACA;AACA;AHCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AIXA;AACA;AAuBA;AJCA;AACA;AIEA;AACA;AJCA;AACA;AACA;AACA;AALA;AAOA;AACA;;;;;;;;;;;;;AKpCA;AACA;AAEA;ALCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AKCA;AACA;ALCA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;","sourceRoot":""}